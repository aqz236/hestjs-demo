"use strict";(self.webpackChunkhestjs_docs=self.webpackChunkhestjs_docs||[]).push([[9493],{5623:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"getting-started/first-application","title":"\u7b2c\u4e00\u4e2a\u5e94\u7528","description":"\u901a\u8fc7\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u7528\u6237\u7ba1\u7406 API \u6765\u5b66\u4e60 HestJS \u57fa\u7840\u6982\u5ff5\u3002","source":"@site/docs/getting-started/first-application.md","sourceDirName":"getting-started","slug":"/getting-started/first-application","permalink":"/hestjs-demo/docs/getting-started/first-application","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/getting-started/first-application.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u5b89\u88c5","permalink":"/hestjs-demo/docs/getting-started/installation"},"next":{"title":"\u9879\u76ee\u7ed3\u6784","permalink":"/hestjs-demo/docs/getting-started/project-structure"}}');var t=r(4848),i=r(8453);const l={},o="\u7b2c\u4e00\u4e2a\u5e94\u7528",c={},d=[{value:"\u5e94\u7528\u7ed3\u6784",id:"\u5e94\u7528\u7ed3\u6784",level:2},{value:"\u521b\u5efa\u9879\u76ee",id:"\u521b\u5efa\u9879\u76ee",level:2},{value:"1. \u5b9a\u4e49\u6570\u636e\u7ed3\u6784",id:"1-\u5b9a\u4e49\u6570\u636e\u7ed3\u6784",level:2},{value:"2. \u521b\u5efa\u670d\u52a1",id:"2-\u521b\u5efa\u670d\u52a1",level:2},{value:"3. \u521b\u5efa\u63a7\u5236\u5668",id:"3-\u521b\u5efa\u63a7\u5236\u5668",level:2},{value:"4. \u521b\u5efa\u6a21\u5757",id:"4-\u521b\u5efa\u6a21\u5757",level:2},{value:"5. \u521b\u5efa\u6839\u6a21\u5757",id:"5-\u521b\u5efa\u6839\u6a21\u5757",level:2},{value:"6. \u5e94\u7528\u5165\u53e3",id:"6-\u5e94\u7528\u5165\u53e3",level:2},{value:"7. \u542f\u52a8\u5e94\u7528",id:"7-\u542f\u52a8\u5e94\u7528",level:2},{value:"8. \u6d4b\u8bd5 API",id:"8-\u6d4b\u8bd5-api",level:2},{value:"\u5b8c\u6574\u76ee\u5f55\u7ed3\u6784",id:"\u5b8c\u6574\u76ee\u5f55\u7ed3\u6784",level:2},{value:"\u5173\u952e\u6982\u5ff5\u603b\u7ed3",id:"\u5173\u952e\u6982\u5ff5\u603b\u7ed3",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"\u7b2c\u4e00\u4e2a\u5e94\u7528",children:"\u7b2c\u4e00\u4e2a\u5e94\u7528"})}),"\n",(0,t.jsx)(n.p,{children:"\u901a\u8fc7\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u7528\u6237\u7ba1\u7406 API \u6765\u5b66\u4e60 HestJS \u57fa\u7840\u6982\u5ff5\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u5e94\u7528\u7ed3\u6784",children:"\u5e94\u7528\u7ed3\u6784"}),"\n",(0,t.jsx)(n.p,{children:"\u6211\u4eec\u5c06\u521b\u5efa\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u7528\u6237\u63a7\u5236\u5668 (UserController)"}),"\n",(0,t.jsx)(n.li,{children:"\u7528\u6237\u670d\u52a1 (UserService)"}),"\n",(0,t.jsx)(n.li,{children:"\u6570\u636e\u9a8c\u8bc1 (DTO)"}),"\n",(0,t.jsx)(n.li,{children:"\u9519\u8bef\u5904\u7406"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u521b\u5efa\u9879\u76ee",children:"\u521b\u5efa\u9879\u76ee"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"bunx create-hest-app user-api\ncd user-api\nbun install\n"})}),"\n",(0,t.jsx)(n.h2,{id:"1-\u5b9a\u4e49\u6570\u636e\u7ed3\u6784",children:"1. \u5b9a\u4e49\u6570\u636e\u7ed3\u6784"}),"\n",(0,t.jsx)(n.p,{children:"\u521b\u5efa\u7528\u6237 DTO\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// src/dto/user.dto.ts\nimport { IsString, IsEmail, IsNumber } from '@hestjs/validation';\n\nexport class CreateUserDto {\n  @IsString({ minLength: 2, maxLength: 50 })\n  name!: string;\n\n  @IsEmail()\n  email!: string;\n\n  @IsNumber({ minimum: 18, maximum: 120 })\n  age!: number;\n}\n\nexport interface User {\n  id: string;\n  name: string;\n  email: string;\n  age: number;\n  createdAt: Date;\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"2-\u521b\u5efa\u670d\u52a1",children:"2. \u521b\u5efa\u670d\u52a1"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// src/services/user.service.ts\nimport { injectable } from 'tsyringe';\nimport { logger } from '@hestjs/logger';\nimport { CreateUserDto, User } from '../dto/user.dto';\n\n@injectable()\nexport class UserService {\n  private users: User[] = [\n    {\n      id: '1',\n      name: 'John Doe', \n      email: 'john@example.com',\n      age: 28,\n      createdAt: new Date()\n    }\n  ];\n\n  findAll(): User[] {\n    logger.info('\u83b7\u53d6\u7528\u6237\u5217\u8868');\n    return this.users;\n  }\n\n  findById(id: string): User | null {\n    const user = this.users.find(u => u.id === id);\n    if (!user) {\n      logger.warn(`\u7528\u6237 ${id} \u4e0d\u5b58\u5728`);\n    }\n    return user || null;\n  }\n\n  create(dto: CreateUserDto): User {\n    // \u68c0\u67e5\u90ae\u7bb1\u91cd\u590d\n    const exists = this.users.find(u => u.email === dto.email);\n    if (exists) {\n      throw new Error('\u90ae\u7bb1\u5df2\u5b58\u5728');\n    }\n\n    const user: User = {\n      id: Date.now().toString(),\n      ...dto,\n      createdAt: new Date()\n    };\n\n    this.users.push(user);\n    logger.info(`\u521b\u5efa\u7528\u6237: ${user.name}`);\n    return user;\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"3-\u521b\u5efa\u63a7\u5236\u5668",children:"3. \u521b\u5efa\u63a7\u5236\u5668"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// src/controllers/user.controller.ts\nimport { Controller, Get, Post, Param, NotFoundException } from '@hestjs/core';\nimport { Body } from '@hestjs/validation';\nimport { UserService } from '../services/user.service';\nimport { CreateUserDto } from '../dto/user.dto';\n\n@Controller('/users')\nexport class UserController {\n  constructor(private userService: UserService) {}\n\n  @Get()\n  getAllUsers() {\n    return this.userService.findAll();\n  }\n\n  @Get('/:id')\n  getUserById(@Param('id') id: string) {\n    const user = this.userService.findById(id);\n    if (!user) {\n      throw new NotFoundException('\u7528\u6237\u4e0d\u5b58\u5728');\n    }\n    return user;\n  }\n\n  @Post()\n  createUser(@Body(CreateUserDto) dto: CreateUserDto) {\n    return this.userService.create(dto);\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"4-\u521b\u5efa\u6a21\u5757",children:"4. \u521b\u5efa\u6a21\u5757"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// src/modules/user.module.ts\nimport { Module } from '@hestjs/core';\nimport { UserController } from '../controllers/user.controller';\nimport { UserService } from '../services/user.service';\n\n@Module({\n  controllers: [UserController],\n  providers: [UserService]\n})\nexport class UserModule {}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"5-\u521b\u5efa\u6839\u6a21\u5757",children:"5. \u521b\u5efa\u6839\u6a21\u5757"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// src/app.module.ts\nimport { Module } from '@hestjs/core';\nimport { UserModule } from './modules/user.module';\n\n@Module({\n  imports: [UserModule]\n})\nexport class AppModule {}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"6-\u5e94\u7528\u5165\u53e3",children:"6. \u5e94\u7528\u5165\u53e3"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// src/index.ts\nimport { HestFactory } from '@hestjs/core';\nimport { AppModule } from './app.module';\n\nasync function bootstrap() {\n  const app = await HestFactory.create(AppModule);\n  \n  const port = 3002;\n  \n  Bun.serve({\n    port,\n    fetch: app.hono().fetch,\n    reusePort: true,\n  });\n  \n  console.log(`\u5e94\u7528\u8fd0\u884c\u5728 http://localhost:${port}`);\n}\n\nbootstrap();\n"})}),"\n",(0,t.jsx)(n.h2,{id:"7-\u542f\u52a8\u5e94\u7528",children:"7. \u542f\u52a8\u5e94\u7528"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"bun run dev\n"})}),"\n",(0,t.jsx)(n.h2,{id:"8-\u6d4b\u8bd5-api",children:"8. \u6d4b\u8bd5 API"}),"\n",(0,t.jsx)(n.p,{children:"\u5e94\u7528\u542f\u52a8\u540e\uff0c\u6d4b\u8bd5\u4ee5\u4e0b\u7aef\u70b9\uff1a"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u83b7\u53d6\u6240\u6709\u7528\u6237"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:3002/users\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u83b7\u53d6\u5355\u4e2a\u7528\u6237"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:3002/users/1\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u521b\u5efa\u7528\u6237"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:3002/users \\\n  -H "Content-Type: application/json" \\\n  -d \'{"name":"Alice","email":"alice@example.com","age":25}\'\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u5b8c\u6574\u76ee\u5f55\u7ed3\u6784",children:"\u5b8c\u6574\u76ee\u5f55\u7ed3\u6784"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"src/\n\u251c\u2500\u2500 index.ts                 # \u5e94\u7528\u5165\u53e3\n\u251c\u2500\u2500 app.module.ts           # \u6839\u6a21\u5757  \n\u251c\u2500\u2500 dto/\n\u2502   \u2514\u2500\u2500 user.dto.ts         # \u7528\u6237\u6570\u636e\u4f20\u8f93\u5bf9\u8c61\n\u251c\u2500\u2500 services/\n\u2502   \u2514\u2500\u2500 user.service.ts     # \u7528\u6237\u670d\u52a1\n\u251c\u2500\u2500 controllers/\n\u2502   \u2514\u2500\u2500 user.controller.ts  # \u7528\u6237\u63a7\u5236\u5668\n\u2514\u2500\u2500 modules/\n    \u2514\u2500\u2500 user.module.ts      # \u7528\u6237\u6a21\u5757\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u5173\u952e\u6982\u5ff5\u603b\u7ed3",children:"\u5173\u952e\u6982\u5ff5\u603b\u7ed3"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u88c5\u9970\u5668"}),": ",(0,t.jsx)(n.code,{children:"@Controller"}),", ",(0,t.jsx)(n.code,{children:"@Get"}),", ",(0,t.jsx)(n.code,{children:"@Post"})," \u5b9a\u4e49\u8def\u7531"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u4f9d\u8d56\u6ce8\u5165"}),": \u6784\u9020\u51fd\u6570\u81ea\u52a8\u6ce8\u5165\u4f9d\u8d56"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u6570\u636e\u9a8c\u8bc1"}),": ",(0,t.jsx)(n.code,{children:"@Body(CreateUserDto)"})," \u81ea\u52a8\u9a8c\u8bc1\u8bf7\u6c42\u6570\u636e"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u6a21\u5757\u5316"}),": \u7528 ",(0,t.jsx)(n.code,{children:"@Module"})," \u7ec4\u7ec7\u76f8\u5173\u7ec4\u4ef6"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u9519\u8bef\u5904\u7406"}),": \u629b\u51fa\u5f02\u5e38\u81ea\u52a8\u8f6c\u6362\u4e3a HTTP \u9519\u8bef\u54cd\u5e94"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u4e0b\u4e00\u6b65\u53ef\u4ee5\u6dfb\u52a0\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/hestjs-demo/docs/fundamentals/interceptors",children:"\u4e2d\u95f4\u4ef6\u548c\u62e6\u622a\u5668"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>o});var s=r(6540);const t={},i=s.createContext(t);function l(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);